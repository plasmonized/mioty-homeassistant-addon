<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>mioty Application Center für Homeassistant v1.0.5.6.22</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #ff6b35 0%, #f7931e 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #ff6b35 0%, #f7931e 100%);
            color: white;
            padding: 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .header::after {
            content: '';
            position: absolute;
            top: 50%;
            right: 30px;
            transform: translateY(-50%);
            content: '⚡';
            font-size: 28px;
            color: rgba(255,255,255,0.3);
            background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfQAAAB4CAYAAAAQAa8/AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAABnUSURBVHgB7Z0NcFXVmcf/j5AQCCEfJCQEQYhAQj4DkgBJQI1rAWNtsVo7Om1n2pl2Zmd2Zne2s7s7s7vd7vt2u92d7bvb6bQzO53OdLHWtlZ31KptaWsrCtWqICGEBAgJH0n4JgQSPpMPPkK63/M/yX0nN/dzc8+9994T/r+ZO+ee977nnOf3P+fce9/3vO8MQAjhf7t374bNZsNQsDjSj2+V7F4fzFLRl8uJ/Hw7CgqyYLFYQHwPGnNhNDFFe8uKQyJJfKPz8X/jOqKHmSzlA8AJINmLBQjvNejk5BWKEyD27duHxsZGTJo0CYa9e/di3bp1SElJGdJ7ORwO1NfXo6+vz+w8k7/+6wqwBmEo1NfXo7q6GjabzYyuGfPcm7VdN3btRGXJeBj8+sTBbOlK9s3Nzaisrn7TjZOdR4wt3l4F+vPy9vbW4+hRB9avXw/fzCe8lfXtKnhfMjEejzEeVzoLnYTOohUcOnQIVnqgowJlrJ6envW/nf6P8ubmZld8Jft6e3vfjkQitri4OJPnDgXf7k7e2vqHhJjr2bm3k6HWsRiZCPfGzTuNHHlAd3V14dKlS5g+fTqSDKxwbNq0CYsWLQJhc1gRiQSsQOze/XY4W7wWOjIUEWLu5OwViZFVFGLOlGEIBVqfvVv7WjRp9/m5PGsocGGhZ2dn+7nQ+dBK94iWiLkTi+dFW46IkYiQNUHT6eqAL8KyeLf/tVjn3s4a9iJdRCYJncdqhPCNIiLmlre3dwPi5FS4dOHhxNNdERkmfJlmYjrPnEJEzGJBECJCjFiLpNdZjZTQCVEw0+J7kVKLh9CKhyxOCpETOhFhnIzOHEQ3qVEipST4QLIhJ4tUW5m6qYsLN6cNl5HKtGGdl1tWiXJeL7FKZc5uHXOydnIKL2QGOUYKz9y2VtFQJ4kOmTzx8rl50jyefnvKqb7/LKdEGzK1k/T6kGnI1C4HGk8KX3j41SkTqAEa8d0Qk4E7hRAJxGYzVs+IhB7n2aVrhZj7JnSJO5YXcuOMrxKRZOIo9t4m1iFr9f3OOhTPv/XRoD6hhPvlRuPvO8z4BCKDM0I4qEkIgvd2iUhxW9Y4iGl4a5cUOK9NJhKPFJZ97RO68M12Q0xQZF0qHOdCdjJwl0WKiEKczDwKHYUn8gQN8v8sJYhJINZa+NHuTAjnCBOvBe6LoONS6N4aGKi9vTjywYcIyImfkKxLtCyZFOEvh4R7fcOe70bGJR5zCy1VObJ4LdGU1ibyH4gWKT8nhV4+qM9LqQmzLsIz3uayj1F3cPnJAIhvcIvb1XGJNJz3hSyLiJWJWBcRbIyaKOXCpQfX25BISKFbpCSF7wt3XlkT46iE5dJLp5cPRvL7nN7+u44vKXGybCIjKg8vRRJV6OLrk+i0ykOB7Q2HGOoSJ8WOQgQ5pZOQRcZHBm9t+kZe5L3A5U3UhwCffZZdDVfK//73f5j/YNOmTUOdG/9nOPlMJxGfFQtS5dFBbR2/ELpfdjjr3K6XgV6vM85JiZPJXJGBXJyJJ9NpJtEQXpEXK3v1BhQFSiL1FIhDMrJ1ibciIoEvizVL7H5PvQsHuI6NnHAubtJLIpUhnGnGEwuQTJ6YS7FYpEQhb+k6vBe1+yXUEKLHYynR/xeyZHwRm+3yIFCnO4y9YGWyBJXVJy8ipNO8Lqm8CzNKFiLhc9rKZWMUJ8TsLBwrnO+j2wZB1JC1M4xqQ3qNQo+SUcKhGfUuZSKbZAWRSBOpOVhIkS0+u9KDCL3cSg4WI1c3nf2zKA7WKlhxsKi5N6vMOQ+JK7YWWlsyexLm3Xmy5M/WfRvpysjWztKPgcSZrFvdqjdOazvM5OG8lKL1SWNjR1/bnF0FJvVhQcOJtpGvHe9N8S5iL4xdLlOJzCJFKqNNzOIjEY+y9LJgTjg8y9KdF3C+jt7sLi9ltB1f6FfOfh5/vX//1v9+k9f/n//+FjfXrBfGAQS41fU+xNPRe7j8MQgz+k3DYDATQhgTKTSx9PcPJCZ8KLH2Xd6tHKJ/tO8Ej0bWrJsA5lKlcMd7hEIgI4OKlvNRSLkE3gDPSZQ3TYWQR5DlMNMSJrZOdI8zIhJUl6xbCt1Z13cOcL30O9+5Eg4uo+vj3B4OqJKJVe4r9/KFcBb7YAgXPXXaGQi+sTN8I1Ai5sxLfNUlNvJI8v1O1k1Cdu/iTuFl6eosI/1EJP6RsTOTcO6tyeQRJzjO5JWRT/AvzYLkPEfFp5xziK1NeJG1c3vKlIsqnhbPOdTnLQ8vkdL1o3UevLT4r4jfErsNvlTMiDgxC32eYbL8k8ldMrZWJWg9kXEfDFLO3CU8C525X3DJA++F6/1lPNJFCOaVr1vKhacfTg9k+4y9LPQlXe1lOEe8CbvCvC4pF4lFKl5QZDvJelMhjJlsLOwwHnJC91K/j0LnxEPmvPjIDUIbZQVrMkbBKqJN9EHKY5BgxNa1L8I1Crd46fcyRfkEQSLLJFyXSTxLgJUBq4gUaU2GYDxEOBxbfSxE1k9qEHwl9FBwFrE3N2hfLAOJhLfJJFgtnqd8mhCJZOPiWe/dJJJZvKJNT8ZX6h3j4lNkNTpPuD0PXlnL6SIXI1cH/e4KWrKONd7K3Wm3DdnI+iQyrfEjUq97K3fnwxaJ+6BcHWBvdJyeT0TKQlKyfjGTKZR5CDvzlKzRMyGGaOHPh+lm7bKp1ggxJGJbWRExC7+VLbJZJlqFTr8hZe0ZE5dIfKbZZYoyzOaUKdcUm3qMdAaD87wGIyLkDRfblEJeqDPxBEaqF/eoKZx5Z5RwvxJYmcjULJNtTkGnwqOzUE3hqFf89LEP5YwIp5+iNuWcA2TDZf1IgOgTYgw/RTLEKCZwJe7zJK5Gea8z9u4nUUt5eDJBx0qJVgYfEYJZpxjB5k/a5pRHZ1dbnRa6k60TMiVOCqVN5irD2V12YRJmQKdbyoJaLO+xGTv+KeUwEyGRZmyJgZCkOhEh3CZRuzrSXSKt3ZORMl97bxd8w1n1B6I5MNXkQw5IeTgKBm6//2wIEz4JiReWSNwFxl5oUNWGgJJJ8pYJ81qdsAQZE+8NrM3KJjhPU45CJO1MKXQplhMRBi5ZnOhBJdL/X2Th7i5kMY7CMRGXjm7l81BYQw9DJpkNuqaJ8HVHJJYiCKLRpuMF6lK1VB6PU5ERJtZ6lC5vlJxSBTHKPJ8+oKOYzJHGPNBOYhELNQ4kkNllvjnKX1h4lnJJXBu1BJ3skSJlGWJEJGJb7OeFNkpIoXnPkJQzKwPRp0+7SIiBT0WKrM4VTsqbU6ooLBF2Zt8iSz0Cwy5kIq9ZrWWLGRkJPROyYQhJpCQ7xUJCZHKhOJmxvSKFjJA5xaUc2IRNXoaJ0GJtQgoZS/pUxSsXOyGb0iNLBWdLd0YqL4l5v/vvfw0htKgwEZISdOhqNAYbOzAOYSX70rSQr8l0EYP9aL7/v7fS5vhRCBM8k4GEw8/ffxRCZKnKwJEPf3fHR//xF4kHDh7cCLOULF22cXpB8u4l08d9Zs/7t3/RtL/1u+9++1lk5U5NnDH3gVUbVsycMuXJyrN11x8+eOxPjpb6v3zj2Z/+/t8OfHC/rW3g9o7rgyIhZq33AEQzJz7+4DdWJC5+6Cef23m28eZ337x88Fhz15W2Pn98f0z/GbePHCt/6EM7nnn8ntOr12z6qcVmGwTZvD2nz3/k9Bc+v3nJqpVP/4uJqGgQkWKyNVlJdNdBOhEwJmLOkTsHU4TfuT5Qzv4MwgZKhDFPZVLpJhE1NqsvBpJDpKK1uyESU7dZJcaIFUxshcZCCEFAQxpJNK9zMnaSZM6URKxJvUuJWJiJxbxNVDa3S4OoJAqTFEXlUj6yWp2kZsmlhNAsYjUZe8XESCT3DRaxdkO9yb0hsZGUGQWpz0ScdYfEDkqZxRIpzZIGEaRMEjT+JnLBImM6ITJZs0jYDqZe6zXFyOhGepPxUYZy1SWyUJKVy+yCRGvZ6ktdJzMOJcxZKPwhgdUk8qOZjuGzR7Dw8OFD3ZfPXt776tP/VnH8yLFvd3f1PBAJBHt7ep6d9+ADXU8+9a3YBZHKSZOKx8WBQ4c6K7q7fJHsHG7P12/f3nny9y99d9fZM42fv+4KVSLu7u7Zv2Hp0hcr5y1clhgvxJCSdyNx4WZITZbQhJgZMXPSRr1U3jBKrUU+3SJEzLQz/b6Dd2xEJL4o6e/xG3+9EI8xNaZLN4xMBhJnOKtZLl7a7K1kxZO4u/Xq1j7HejXQr1uvBl6LR9YZGTqLvwl9NjLgTy7ld+wSFy+cRfaE6u7/eNJTtqGlLKiLKWkXlAJFN3YZdlHU2s0iS9YZI3XJNH8mIa3AhYy1YsN8MRFeZBxtVCjcLs4Kt0lG5o5EQGxCLKk0+xWKQONhYwNIFLKpBe5I8sJHRJx04JGtOd2v3e7Y3s+Kbn7kVtuaM3ddDSjv7u+8dv3Pr84kgRF6Xz+O45xbC2yJUdB8ff7ztIJJT8bOQZpFytwqv1qHWOGpNZfJG5nQeRSLlM7RyEfgLJDJp7vFSCN0RUEXl2RbyJQRGOLJAXkRNq6ArkKy5r4PdvNtFiEQ8vP6BoQNwdA4VUVxEDlxqd1q6oDMPqUsLCyy5mR0Eu0w+e6wGKXhBSOp6Q1mzUcqMU8uZJBVJJ9z4Y6rOzUO5PGg+NTfnP9Y8wkbf78O0cFpxYPRuDCHVLvgNrFpLrxs9dLMedbX+7l3oKPKcg5iyLwq/2eEiMQIJJHrLKv7iMCMJdpQsAJ4ILJQnJSsQq2yEBEXBCtOKb8vOEfHBh3NiJxmhm9fPXsS0dOlW6qvNJw1pKRN2xCPJePcmSYjb+QQQ6sEy6F9Xm6cOJbffX/7K4+kZ+Xa4uNlNUaY/9q6//fHBxqPP3+qvvL4OVvf3nV9/YP35Iyf8LnKOVO/t/Tm7c/86dsHfP+dLT/p7jgx/4H3zf9R/eKVn3r6/U+++ObF/S/cfOP3AV+U89bSCPt4G6/fPgHp7YoFCGDhJDQ3HPn1m0+9tP/IidaWjj5V63oOqUz9WGpmXt26By47dW7y/Qs+f6jhWNvRxrq6X3f3DdBhfCXLJ0Qk3aW1NxQjxFgF4B4X7xbWs5Ul3K4gN4Qy3u8kVrZgpFzZjbSF+81gJOgJCdkgE+1OQYEI4T3qRspfp89J6HKoJUIf1PJ6z/rNhFPvKT8m3hePIQ4oe7WF5UeXl3iJOKdRMYgz8WZR59dYTEo6xUIwjBbBCEFImQRiG4SI9nCREQ95Zh4Q9z/aIfTk1DGdXcGHgHPp5aZnWFZ8uq/vemrK6BuFc6a//w9vv/XPPkE2p7oqzc7Z/8VBJ5+JBpF2FroIo9ZlYptdRJh5CZlRczlZ3U9RNJnZJQ+Q2Bq1MmGfhZAsZNolGcl8YNaZxKkNiKhzWTDJFrjMKZJIeZHZCYmVP1JepqxWp8dBJuvYpUslJRJfVZGg8pW7d8vNgZAkm9ggIi/IhJDINAvh9Bw/7/9vJG1dF48e+WPT7v38lk8iEvPZoZjHy5L+kX3qDa/nJNlpJAGpzf8fOPSPp97/sL2jfeXpk1ebq+uOIBGJMj6JON6xBG4dOkA6JwixJJstnT1zNz9au6g5jT9vHj1z+K0PPtQBcv3gwdPNJ49yKtdVaP+S0DG8F5uNgHZ5JZyHQb2gCDnqHTlJVODpJQVOqUSIGCbCiYNV/HGCGhqLNKRnT2zJLp6AUeNHw1JdXZNwRSPmySKO+SJfOzDXiYWCFa7YJ+LJOjEOBxZXXGnNv2TjKcN3J4M0QYNa/IWTB8+0U7QCXpzpF8lOUJY6Z9nUO/xfxNJvNOCjjhsvHNj7NzNnTvtWXUPjPz327IM/dzyIHjKzm1++oSUNt7buvJFJa28YjLhJh5UNp5DxfFY+YrYwu3z2r7k4YjZoJUHiLafRAa84k4FHcZPQ3b3Ni4Fdt+P3thm78xfM2P2aEPjLVAohIt+XmhbfjWKlESmGIDuJvPPWa8kv7fqfwqam428p9Jx52+oe0PoZr/NfP2L3t7xMbGI4xshS7rIgQ16wKpJMOBR4n50wfNglRmhktUOYLTyUSGjuJO1J5IzBZGKE12kFkfOJD77pTr+u5hOvHtj/n21Vsx94+MmNP5g5a8ZPr7eDNPaJZyzGPJQ5IyuJhDQi5EB8jqJJD0PvGD3P9Q9/9oO1C5e8/YWgcOCtV0/v37ffSYr6M65x5xRsLKKIjEu0nBWbr2ILRR3XmJOqUc9DIrXWIwHn8pCWOJG0c+QUbx8lDGGDPQaKRK0b57QO52LK7qcPq4/yMgkEA9B+rDR0o3tUg0n7upKJj5mO0qyYeZdVXF1o6cQR+7P3x4+OzayqPLBo5ap31TqUKr9sdpGVFG2dDbSJEjbKMInrFvLLStHpFyPIKZCn6Wh5Yh5KRjNV51gN9bGLbcgIeJzS5PaURWJmI6+p35mYe9YWL0ZCUIzUSajzUAKhINCBgOVi7b5vThofV7D7aNO5HTt+s3PTB1Z8fuOXv7lp2dKKPRea3j7zTl0VKnPyUOkJSPrXnRSK0vNEkNcH5s8eWLn65XNnfvvmm0+XlRV9a+uWRzt6B2B/b99bQeNyfOPFvAqGKZRcb7/R9OLrb3z6F6/u+a2TztnHZRHJHZRShJ5fnI//Tnvt938Z//qvXvOmqN1SZi+W9qr2R9hJKNRFUhSLGR5jqWmGSJI8wGo1MdayfNZK8yb1vqA4JjIbZa1MhCjVb5Yosd/YnCtPFyPJu7U5ExJ3f9x1K9+IePHhQ/Zd3qcPVkQWz9tBK19G6q7xOSJGjC4HBz8VYuyAhzT3dHRPr1n/uaRHHnv+4QOfHhzQwWHrQHJcCKhQFIlyBaFW5CQ3uXPaVuU7p25zp5idB+DJhLNEazdGWPLOLbm9L8sVT8rTSdB8lY9eYr7K5nzPf0I4KmTjcafmrYf/85ffmj59yscvNXee2L3nve80ty1HVdWEr9psNty6dQvd3b1vvfv+4etfrz9cfe7s+bpzZ85+6s333u9l9XjpQ7aJj0+pKM5+cOn6dUWf3l7zP7/o7elhP5vyMJKU+69j5syZdvkm/FJdnYt2YAiZaSmkEQlGI25hUdkMLuLsA/rw3Q95jK9Y+bW7lq6qQdbYUVi7dpHr8ixw6tQprFu3/i/vR8kOQI5DH1dQlBJfUrHVsmiNPJNGQ8tZHD2yc2Mw8HVPvfnJvBebT6KeRIw02ujEQcpJy02zJtGOsHHMC2eYHKrcJOYlU5dKx5y19aMlpM5Yop4LYZ8zB5VCdl5UM0Fa4xI1K5G4t4zOGjjrPHCBWo1DsM0xzwWWKe/WCIkQU5ByzRJpMKzQIqE1hg8xW6lD8p3ZFQfGZJc9Wv71X80IYFVEohJ6z4YN2/ZdunR5h8VmY+vZNlz3VjlIyJ6qSl8hW/OqyS+fkUIdqcZJFFyDwdcJuJEJNTMEQ7aOjFzFmXyZBe4TJKPvG8VB2tQp6M1fQ9K6HJ9EJStZgSxgtvQ5J9C5cGLjLuM7F4bAhfr9f3Kl8Xhdy9WrV5b2DO6CYUhBVXmuoyNs8HoHKlCu/OLiosfE8vNfP3iq89q1s1fuP3wofezYMUknTzTNrz7w9r3vr5xX9VZ317X73oWTwJfQCTu4yC+2tlZZONjJ/2Hm6G+L8LPPPP0k1bUDFaUpQz/vxEhEOLX3jF8WlE4Vezhnb7e2Xb6YNzZY0fJx5Qd8z7JeK2kCBP8IzaNJFGGqLGKF6uGRvBLZ9GmKJ3v5JO44Qw3bQrfK4iFv8QaSDGEdSL2EXs/HDV7vb8PngouvXtBZKI0y8KQSYr5NjmJCCCFEH7lL1FXJCKYq8uRxA8pBQadQ9fI3tO/fX39vW37PtDh7YTlwHgIdUXJWFCwT9L38EJFQwO7HdJcMx6fWP/Ew/nnfJx6YZF4WwZh3mIvDzKhpY7nE+Wdj9fC9X4+wGc/L7/Z7QNXNmXDWqKUXyRMfcaNaOZGxjy2eXLUwlX9g2qS5Sq/3hcvj7WnfFw7H/m30jrvPf8dO6QW92avlEVG29EoJxZ24X8cGH8fL5H4FtHOO1Ay+dZIKFCpG4CJQgvTz/UfVhJnZBYbDjGZIww9PQfTcnqVb7l9rr2YpVJEhN0f0cEW8X+IvFdcqxBCKFvKbVPBzjtrX+S1H1ayk5HH7hNbKaRiHhZmIuNlyy5w1Hkv7GlPm4Xd+D0kYjaQ1h5vbPl73zXxrQs85fGfkZGP0HNY2Z4SJvzbMYA/KrNQ2YrVpG1w/u0EQohEgJ+9/rftgeLB+47cPj8mKZlkSyERGkB/WX0OtELJzKXTpYoQESDJpL6hZCJL5kxLlFLPYEVORNb0yWZNbK1xPjo7z8p/U/aKRcz1KZUzTgLb5C1Lp8EvmSFJu5ktYbE/xITOVCt/JyNL+fDNh2VgdvxLi2EKr2hpP7QlEjMvj0uxJ/vUd5xNe3eOhNpL8oQQQgxLrLa+9JqtjzgwfrTdPvfBvV+xjy+96ONO9MnfmbwIIcRYy+vnCjPKvjX/waf+B6kpKiMdXbZMiEJKQKJOqfM57kGiXeIKRK7sTFfJZLs3P4EQI4QQYox1du5kVH/lxQQM3KrKmfNx2GxvwBYnv4PEZFX5f+xWa/fCz/3oOVTKVfAaL40RQohRfHfvXqJ5+d/fu+9qOQdOycEbcGbCGvz28z+YPjb/2qZ1zz0V73i5v/YfT+79+Y+wcdnq1+67Z8EOiRvE/w9c9fGzd4YW7AAAAABJRU5ErkJggg==');
            opacity: 0.8;
            z-index: 1;
        }
        
        .nav {
            background: #6c757d;
            padding: 0;
            display: flex;
            justify-content: center;
        }
        
        .nav-item {
            color: white;
            text-decoration: none;
            padding: 15px 30px;
            display: block;
            transition: background-color 0.3s ease;
        }
        
        .nav-item:hover, .nav-item.active {
            background: #ff6b35;
            color: white;
            text-decoration: none;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            position: relative;
            z-index: 2;
        }
        
        .header p {
            font-size: 1.2em;
            opacity: 0.9;
            position: relative;
            z-index: 2;
        }
        
        .content {
            padding: 30px;
        }
        
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            transition: transform 0.3s ease;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
        }
        
        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            color: #ff6b35;
            display: block;
        }
        
        .stat-label {
            font-size: 1.1em;
            color: #6c757d;
            margin-top: 5px;
        }

        
        .sentinum-footer {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: 30px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            color: #6c757d;
            font-size: 0.9em;
        }
        
        .sentinum-logo {
            width: 24px;
            height: 16px;
            margin-right: 8px;
            opacity: 0.8;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }

        .modal-content {
            background-color: #fefefe;
            margin: 5% auto;
            padding: 30px;
            border-radius: 15px;
            width: 90%;
            max-width: 600px;
            max-height: 85vh;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            position: relative;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f0f0f0;
        }

        .close {
            color: #aaa;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            transition: color 0.3s;
        }

        .close:hover {
            color: #ff6b35;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #333;
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
            transition: border-color 0.3s;
        }

        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: #ff6b35;
        }

        .form-group small {
            color: #666;
            font-size: 12px;
            margin-top: 5px;
            display: block;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .submit-btn {
            background: linear-gradient(135deg, #ff6b35 0%, #f7931e 100%);
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            width: 100%;
            transition: transform 0.3s;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
        }

        .submit-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .error {
            border-color: #dc3545 !important;
        }

        .error-message {
            color: #dc3545;
            font-size: 12px;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🌐 mioty Application Center</h1>
            <p>Für Home Assistant Integration</p>
        </div>
        
        <div class="nav">
            <a href="javascript:void(0)" onclick="navigateTo('/')" class="nav-item active">🏠 Dashboard</a>
            <a href="javascript:void(0)" onclick="navigateTo('/decoders')" class="nav-item">🔧 Decoder</a>
            <a href="javascript:void(0)" onclick="navigateTo('/settings')" class="nav-item">⚙️ Einstellungen</a>
        </div>
        
        <div class="content">
            
            <div class="stats">
                <div class="stat-card">
                    <span class="stat-number" id="sensor-count">0</span>
                    <div class="stat-label">mioty Sensoren</div>
                </div>
                <div class="stat-card">
                    <span class="stat-number" id="basestation-count">0</span>
                    <div class="stat-label">Base Stations</div>
                </div>
                <div class="stat-card">
                    <span class="stat-number" id="decoder-count">0</span>
                    <div class="stat-label">Aktive Decoder</div>
                </div>
                <div class="stat-card">
                    <span class="stat-number" id="mqtt-status">⚠️</span>
                    <div class="stat-label">MQTT Status</div>
                </div>
            </div>
            
            <div id="sensors-section">
                <h2>📡 Sensor-Daten</h2>
                
                <!-- Sensor Registration UI -->
                <div style="margin-bottom: 15px; padding: 15px; background: #e7f3ff; border-radius: 8px; border-left: 4px solid #007bff;">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <strong>📡 Sensor Registration:</strong><br>
                            <small>Neuen Sensor am Service Center anmelden und in Home Assistant registrieren</small>
                        </div>
                        <button onclick="showSensorRegistrationModal()" style="border: none; background: #007bff; color: white; padding: 8px 15px; border-radius: 5px; cursor: pointer; font-weight: bold;">+ Sensor hinzufügen</button>
                    </div>
                </div>

                
                <div id="sensors-list"></div>
            </div>
            
            <div id="basestations-section" style="margin-top: 40px;">
                <h2>🏢 Base Stations</h2>
                <div id="basestations-list"></div>
            </div>
            
            <div class="sentinum-footer">
                <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfQAAAB4CAYAAAAQAa8/AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAABnUSURBVHgB7Z0NcFXVmcf/j5AQCCEfJCQEQYhAQj4DkgBJQI1rAWNtsVo7Om1n2pl2Zmd2Zne2s7s7s7vd7vt2u92d7bvb6bQzO53OdLHWtlZ31KptaWsrCtWqICGEBAgJH0n4JgQSPpMPPkK63/M/yX0nN/dzc8+9994T/r+ZO+ee977nnOf3P+fce9/3vO8MQAjhf7t374bNZsNQsDjSj2+V7F4fzFLRl8uJ/Hw7CgqyYLFYQHwPGnNhNDFFe8uKQyJJfKPz8X/jOqKHmSzlA8AJINmLBQjvNejk5BWKEyD27duHxsZGTJo0CYa9e/di3bp1SElJGdJ7ORwO1NfXo6+vz+w8k7/+6wqwBmEo1NfXo7q6GjabzYyuGfPcm7VdN3btRGXJeBj8+sTBbOlK9s3Nzaisrn7TjZOdR4wt3l4F+vPy9vbW4+hRB9avXw/fzCe8lfXtKnhfMjEejzEeVzoLnYTOohUcOnQIVnqgowJlrJ6envW/nf6P8ubmZld8Jft6e3vfjkQitri4OJPnDgXf7k7e2vqHhJjr2bm3k6HWsRiZCPfGzTuNHHlAd3V14dKlS5g+fTqSDKxwbNq0CYsWLQJhc1gRiQSsQOze/XY4W7wWOjIUEWLu5OwViZFVFGLOlGEIBVqfvVv7WjRp9/m5PGsocGGhZ2dn+7nQ+dBK94iWiLkTi+dFW46IkYiQNUHT6eqAL8KyeLf/tVjn3s4a9iJdRCYJncdqhPCNIiLmlre3dwPi5FS4dOHhxNNdERkmfJlmYjrPnEJEzGJBECJCjFiLpNdZjZTQCVEw0+J7kVKLh9CKhyxOCpETOhFhnIzOHEQ3qVEipST4QLIhJ4tUW5m6qYsLN6cNl5HKtGGdl1tWiXJeL7FKZc5uHXOydnIKL2QGOUYKz9y2VtFQJ4kOmTzx8rl50jyefnvKqb7/LKdEGzK1k/T6kGnI1C4HGk8KX3j41SkTqAEa8d0Qk4E7hRAJxGYzVs+IhB7n2aVrhZj7JnSJO5YXcuOMrxKRZOIo9t4m1iFr9f3OOhTPv/XRoD6hhPvlRuPvO8z4BCKDM0I4qEkIgvd2iUhxW9Y4iGl4a5cUOK9NJhKPFJZ97RO68M12Q0xQZF0qHOdCdjJwl0WKiEKczDwKHYUn8gQN8v8sJYhJINZa+NHuTAjnCBOvBe6LoONS6N4aGKi9vTjywYcIyImfkKxLtCyZFOEvh4R7fcOe70bGJR5zCy1VObJ4LdGU1ibyH4gWKT8nhV4+qM9LqQmzLsIz3uayj1F3cPnJAIhvcIvb1XGJNJz3hSyLiJWJWBcRbIyaKOXCpQfX25BISKFbpCSF7wt3XlkT46iE5dJLp5cPRvL7nN7+u44vKXGybCIjKg8vRRJV6OLrk+i0ykOB7Q2HGOoSJ8WOQgQ5pZOQRcZHBm9t+kZe5L3A5U3UhwCffZZdDVfK//73f5j/YNOmTUOdG/9nOPlMJxGfFQtS5dFBbR2/ELpfdjjr3K6XgV6vM85JiZPJXJGBXJyJJ9NpJtEQXpEXK3v1BhQFSiL1FIhDMrJ1ibciIoEvizVL7H5PvQsHuI6NnHAubtJLIpUhnGnGEwuQTJ6YS7FYpEQhb+k6vBe1+yXUEKLHYynR/xeyZHwRm+3yIFCnO4y9YGWyBJXVJy8ipNO8Lqm8CzNKFiLhc9rKZWMUJ8TsLBwrnO+j2wZB1JC1M4xqQ3qNQo+SUcKhGfUuZSKbZAWRSBOpOVhIkS0+u9KDCL3cSg4WI1c3nf2zKA7WKlhxsKi5N6vMOQ+JK7YWWlsyexLm3Xmy5M/WfRvpysjWztKPgcSZrFvdqjdOazvM5OG8lKL1SWNjR1/bnF0FJvVhQcOJtpGvHe9N8S5iL4xdLlOJzCJFKqNNzOIjEY+y9LJgTjg8y9KdF3C+jt7sLi9ltB1f6FfOfh5/vX//1v9+k9f/n//+FjfXrBfGAQS41fU+xNPRe7j8MQgz+k3DYDATQhgTKTSx9PcPJCZ8KLH2Xd6tHKJ/tO8Ej0bWrJsA5lKlcMd7hEIgI4OKlvNRSLkE3gDPSZQ3TYWQR5DlMNMSJrZOdI8zIhJUl6xbCt1Z13cOcL30O9+5Eg4uo+vj3B4OqJKJVe4r9/KFcBb7YAgXPXXaGQi+sTN8I1Ai5sxLfNUlNvJI8v1O1k1Cdu/iTuFl6eosI/1EJP6RsTOTcO6tyeQRJzjO5JWRT/AvzYLkPEfFp5xziK1NeJG1c3vKlIsqnhbPOdTnLQ8vkdL1o3UevLT4r4jfErsNvlTMiDgxC32eYbL8k8ldMrZWJWg9kXEfDFLO3CU8C925X3DJA++F6/1lPNJFCOaVr1vKhacfTg9k+4y9LPQlXe1lOEe8CbvCvC4pF4lFKl5QZDvJelMhjJlsLOwwHnJC91K/j0LnxEPmvPjIDUIbZQVrMkbBKqJN9EHKY5BgxNa1L8I1Crd46fcyRfkEQSLLJFyXSTxLgJUBq4gUaU2GYDxEOBxbfSxE1k9qEHwl9FBwFrE3N2hfLAOJhLfJJFgtnqd8mhCJZOPiWe/dJJJZvKJNT8ZX6h3j4lNkNTpPuD0PXlnL6SIXI1cH/e4KWrKONd7K3Wm3DdnI+iQyrfEjUq97K3fnwxaJ+6BcHWBvdJyeT0TKQlKyfjGTKZR5CDvzlKzRMyGGaOHPh+lm7bKp1ggxJGJbWRExC7+VLbJZJlqFTr8hZe0ZE5dIfKbZZYoyzOaUKdcUm3qMdAaD87wGIyLkDRfblEJeqDPxBEaqF/eoKZx5Z5RwvxJYmcjULJNtTkGnwqOzUE3hqFf89LEP5YwIp5+iNuWcA2TDZf1IgOgTYgw/RTLEKCZwJe7zJK5Gea8z9u4nUUt5eDJBx0qJVgYfEYJZpxjB5k/a5pRHZ1dbnRa6k60TMiVOCqVN5irD2V12YRJmQKdbyoJaLO+xGTv+KeUwEyGRZmyJgZCkOhEh3CZRuzrSXSKt3ZORMl97bxd8w1n1B6I5MNXkQw5IeTgKBm6//2wIEz4JiReWSNwFxl5oUNWGgJJJ8pYJ81qdsAQZE+8NrM3KJjhPU45CJO1MKXQplhMRBi5ZnOhBJdL/X2Th7i5kMY7CMRGXjm7l81BYQw9DJpkNuqaJ8HVHJJYiCKLRpuMF6lK1VB6PU5ERJtZ6lC5vlJxSBTHKPJ8+oKOYzJHGPNBOYhELNQ4kkNllvjnKX1h4lnJJXBu1BJ3skSJlGWJEJGJb7OeFNkpIoXnPkJQzKwPRp0+7SIiBT0WKrM4VTsqbU6ooLBF2Zt8iSz0Cwy5kIq9ZrWWLGRkJPROyYQhJpCQ7xUJCZHKhOJmxvSKFjJA5xaUc2IRNXoaJ0GJtQgoZS/pUxSsXOyGb0iNLBWdLd0YqL4l5v/vvfw0htKgwEZISdOhqNAYbOzAOYSX70rSQr8l0EYP9aL7/v7fS5vhRCBM8k4GEw8/ffxRCZKnKwJEPf3fHR//xF4kHDh7cCLOULF22cXpB8u4l08d9Zs/7t3/RtL/1u+9++1lk5U5NnDH3gVUbVsycMuXJyrN11x8+eOxPjpb6v3zj2Z/+/t8OfHC/rW3g9o7rgyIhZq33AEQzJz7+4DdWJC5+6Cef23m28eZ337x88Fhz15W2Pn98f0z/GbePHCt/6EM7nnn8ntOr12z6qcVmGwTZvD2nz3/k9Bc+v3nJqpVP/4uJqGgQkWKyNVlJdNdBOhEwJmLOkTsHU4TfuT5Qzv4MwgZKhDFPZVLpJhE1NqsvBpJDpKK1uyESU7dZJcaIFUxshcZCCEFAQxpJNK9zMnaSZM6URKxJvUuJWJiJxbxNVDa3S4OoJAqTFEXlUj6yWp2kZsmlhNAsYjUZe8XESCT3DRaxdkO9yb0hsZGUGQWpz0ScdYfEDkqZxRIpzZIGEaRMEjT+JnLBImM6ITJZs0jYDqZe6zXFyOhGepPxUYZy1SWyUJKVy+yCRGvZ6ktdJzMOJcxZKPwhgdUk8qOZjuGzR7Dw8OFD3ZfPXt776tP/VnH8yLFvd3f1PBAJBHt7ep6d9+ADXU8+9a3YBZHKSZOKx8WBQ4c6K7q7fJHsHG7P12/f3nny9y99d9fZM42fv+4KVSLu7u7Zv2Hp0hcr5y1clhgvxJCSdyNx4WZITZbQhJgZMXPSRr1U3jBKrUU+3SJEzLQz/b6Dd2xEJL4o6e/xG3+9EI8xNaZLN4xMBhJnOKtZLl7a7K1kxZO4u/Xq1j7HejXQr1uvBl6LR9YZGTqLvwl9NjLgTy7ld+wSFy+cRfaE6u7/eNJTtqGlLKiLKWkXlAJFN3YZdlHU2s0iS9YZI3XJNH8mIa3AhYy1YsN8MRFeZBxtVCjcLs4Kt0lG5o5EQGxCLKk0+xWKQONhYwNIFLKpBe5I8sJHRJx04JGtOd2v3e7Y3s+Kbn7kVtuaM3ddDSjv7u+8dv3Pr84kgRF6Xz+O45xbC2yJUdB8ff7ztIJJT8bOQZpFytwqv1qHWOGpNZfJG5nQeRSLlM7RyEfgLJDJp7vFSCN0RUEXl2RbyJQRGOLJAXkRNq6ArkKy5r4PdvNtFiEQ8vP6BoQNwdA4VUVxEDlxqd1q6oDMPqUsLCyy5mR0Eu0w+e6wGKXhBSOp6Q1mzUcqMU8uZJBVJJ9z4Y6rOzUO5PGg+NTfnP9Y8wkbf78O0cFpxYPRuDCHVLvgNrFpLrxs9dLMedbX+7l3oKPKcg5iyLwq/2eEiMQIJJHrLKv7iMCMJdpQsAJ4ILJQnJSsQq2yEBEXBCtOKb8vOEfHBh3NiJxmhm9fPXsS0dOlW6qvNJw1pKRN2xCPJePcmSYjb+QQQ6sEy6F9Xm6cOJbffX/7K4+kZ+Xa4uNlNUaY/9q6//fHBxqPP3+qvvL4OVvf3nV9/YP35Iyf8LnKOVO/t/Tm7c/86dsHfP+dLT/p7jgx/4H3zf9R/eKVn3r6/U+++ObF/S/cfOP3AV+U89bSCPt4G6/fPgHp7YoFCGDhJDQ3HPn1m0+9tP/IidaWjj5V63oOqUz9WGpmXt26By47dW7y/Qs+f6jhWNvRxrq6X3f3DdBhfCXLJ0Qk3aW1NxQjxFgF4B4X7xbWs5Ul3K4gN4Qy3u8kVrZgpFzZjbSF+81gJOgJCdkgE+1OQYEI4T3qRspfp89J6HKoJUIf1PJ6z/rNhFPvKT8m3hePIQ4oe7WF5UeXl3iJOKdRMYgz8WZR59dYTEo6xUIwjBbBCEFImQRiG4SI9nCREQ95Zh4Q9z/aIfTk1DGdXcGHgHPp5aZnWFZ8uq/vemrK6BuFc6a//w9vv/XPPkE2p7oqzc7Z/8VBJ5+JBpF2FroIo9ZlYptdRJh5CZlRczlZ3U9RNJnZJQ+Q2Bq1MmGfhZAsZNolGcl8YNaZxKkNiKhzWTDJFrjMKZJIeZHZCYmVP1JepqxWp8dBJuvYpUslJRJfVZGg8pW7d8vNgZAkm9ggIi/IhJDINAvh9Bw/7/9vJG1dF48e+WPT7v38lk8iEvPZoZjHy5L+kX3qDa/nJNlpJAGpzf8fOPSPp97/sL2jfeXpk1ebq+uOIBGJMj6JON6xBG4dOkA6JwixJJstnT1zNz9au6g5jT9vHj1z+K0PPtQBcv3gwdPNJ49yKtdVaP+S0DG8F5uNgHZ5JZyHQb2gCDnqHTlJVODpJQVOqUSIGCbCiYNV/HGCGhqLNKRnT2zJLp6AUeNHw1JdXZNwRSPmySKO+SJfOzDXiYWCFa7YJ+LJOjEOBxZXXGnNv2TjKcN3J4M0QYNa/IWTB8+0U7QCXpzpF8lOUJY6Z9nUO/xfxNJvNOCjjhsvHNj7NzNnTvtWXUPjPz327IM/dzyIHjKzm1++oSUNt7buvJFJa28YjLhJh5UNp5DxfFY+YrYwu3z2r7k4YjZoJUHiLafRAa84k4FHcZPQ3b3Ni4Fdt+P3thm78xfM2P2aEPjLVAohIt+XmhbfjWKlESmGIDuJvPPWa8kv7fqfwqam428p9Jx52+oe0PoZr/NfP2L3t7xMbGI4xshS7rIgQ16wKpJMOBR4n50wfNglRmhktUOYLTyUSGjuJO1J5IzBZGKE12kFkfOJD77pTr+u5hOvHtj/n21Vsx94+MmNP5g5a8ZPr7eDNPaJZyzGPJQ5IyuJhDQi5EB8jqJJD0PvGD3P9Q9/9oO1C5e8/YWgcOCtV0/v37ffSYr6M65x5xRsLKKIjEu0nBWbr2ILRR3XmJOqUc9DIrXWIwHn8pCWOJG0c+QUbx8lDGGDPQaKRK0b57QO52LK7qcPq4/yMgkEA9B+rDR0o3tUg0n7upKJj5mO0qyYeZdVXF1o6cQR+7P3x4+OzayqPLBo5ap31TqUKr9sdpGVFG2dDbSJEjbKMInrFvLLStHpFyPIKZCn6Wh5Yh5KRjNV51gN9bGLbcgIeJzS5PaURWJmI6+p35mYe9YWL0ZCUIzUSajzUAKhINCBgOVi7b5vThofV7D7aNO5HTt+s3PTB1Z8fuOXv7lp2dKKPRea3j7zTl0VKnPyUOkJSPrXnRSK0vNEkNcH5s8eWLn65XNnfvvmm0+XlRV9a+uWRzt6B2B/b99bQeNyfOPFvAqGKZRcb7/R9OLrb3z6F6/u+a2TztnHZRHJHZRShJ5fnI//Tnvt938Z//qvXvOmqN1SZi+W9qr2R9hJKNRFUhSLGR5jqWmGSJI8wGo1MdayfNZK8yb1vqA4JjIbZa1MhCjVb5Yosd/YnCtPFyPJu7U5ExJ3f9x1K9+IePHhQ/Zd3qcPVkQWz9tBK19G6q7xOSJGjC4HBz8VYuyAhzT3dHRPr1n/uaRHHnv+4QOfHhzQwWHrQHJcCKhQFIlyBaFW5CQ3uXPaVuU7p25zp5idB+DJhLNEazdGWPLOLbm9L8sVT8rTSdB8lY9eYr7K5nzPf0I4KmTjcafmrYf/85ffmj59yscvNXee2L3nve80ty1HVdWEr9psNty6dQvd3b1vvfv+4etfrz9cfe7s+bpzZ85+6s333u9l9XjpQ7aJj0+pKM5+cOn6dUWf3l7zP7/o7elhP5vyMJKU+69j5syZdvkm/FJdnYt2YAiZaSmkEQlGI25hUdkMLuLsA/rw3Q95jK9Y+bW7lq6qQdbYUVi7dpHr8ixw6tQprFu3/i/vR8kOQI5DH1dQlBJfUrHVsmiNPJNGQ8tZHD2yc2Mw8HVPvfnJvBebT6KeRIw02ujEQcpJy02zJtGOsHHMC2eYHKrcJOYlU5dKx5y19aMlpM5Yop4LYZ8zB5VCdl5UM0Fa4xI1K5G4t4zOGjjrPHCBWo1DsM0xzwWWKe/WCIkQU5ByzRJpMKzQIqE1hg8xW6lD8p3ZFQfGZJc9Wv71X80IYFVEohJ6z4YN2/ZdunR5h8VmY+vZNlz3VjlIyJ6qSl8hW/OqyS+fkUIdqcZJFFyDwdcJuJEJNTMEQ7aOjFzFmXyZBe4TJKPvG8VB2tQp6M1fQ9K6HJ9EJStZgSxgtvQ5J9C5cGLjLuM7F4bAhfr9f3Kl8Xhdy9WrV5b2DO6CYUhBVXmuoyNs8HoHKlCu/OLiosfE8vNfP3iq89q1s1fuP3wofezYMUknTzTNrz7w9r3vr5xX9VZ317X73oWTwJfQCTu4yC+2tlZZONjJ/2Hm6G+L8LPPPP0k1bUDFaUpQz/vxEhEOLX3jF8WlE4Zvezhnb7e2Xb6YNzZY0fJx5Qd8z7JeK2kCBP8IzaNJFGGqLGKF6uGRvBLZ9GmKJ3v5JO44Qw3bQrfK4iFv8QaSDGEdSL2EXs/HDV7vb8PngouvXtBZKI0y8KQSYr5NjmJCCCFEH7lL1FXJCKYq8uRxA8pBQadQ9fI3tO/fX39vW37PtDh7YTlwHgIdUXJWFCwT9L38EJFQwO7HdJcMx6fWP/Ew/nnfJx6YZF4WwZh3mIvDzKhpY7nE+Wdj9fC9X4+wGc/L7/Z7QNXNmXDWqKUXyRMfcaNaOZGxjy2eXLUwlX9g2qS5Sq/3hcvj7WnfFw7H/m30jrvPf8dO6QW92avlEVG29EoJxZ24X8cGH8fL5H4FtHOO1Ay+dZIKFCpG4CJQgvTz/UfVhJnZBYbDjGZIww9PQfTcnqVb7l9rr2YpVJEhN0f0cEW8X+IvFdcqxBCKFvKbVPBzjtrX+S1H1ayk5HH7hNbKaRiHhZmIuNlyy5w1Hkv7GlPm4Xd+D0kYjaQ1h5vbPl73zXxrQs85fGfkZGP0HNY2Z4SJvzbMYA/KrNQ2YrVpG1w/u0EQohEgJ+9/rftgeLB+47cPj8mKZlkSyERGkB/WX0OtELJzKXTpYoQESDJpL6hZCJL5kxLlFLPYEVORNb0yWZNbK1xPjo7z8p/U/aKRcz1KZUzTgLb5C1Lp8EvmSFJu5ktYbE/xITOVCt/JyNL+fDNh2VgdvxLi2EKr2hpP7QlEjMvj0uxJ/vUd5xNe3eOhNpL8oQQQgxLrLa+9JqtjzgwfrTdPvfBvV+xjy+96ONO9MnfmbwIIcRYy+vnCjPKvjX/waf+B6kpKiMdXbZMiEJKQKJOqfM57kGiXeIKRK7sTFfJZLs3P4EQI4QQYox1du5kVH/lxQQM3KrKmfNx2GxvwBYnv4PEZFX5f+xWa/fCz/3oOVTKVfAaL40RQohRfHfvXqJ5+d/fu+9qOQdOycEbcGbCGvz28z+YPjb/2qZ1zz0V73i5v/YfT+79+Y+wcdnq1+67Z8EOiRvE/w9c9fGzd4YW7AAAAABJRU5ErkJggg==" alt="Sentinum" class="sentinum-logo">
                <small style="opacity: 0.6; font-size: 0.8em;">powered by Sentinum</small>
            </div>
        </div>
    </div>

    <!-- Sensor Registration Modal -->
    <div id="sensorRegistrationModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>📡 Sensor Registration</h2>
                <span class="close" onclick="closeSensorRegistrationModal()">&times;</span>
            </div>
            
            <form id="sensorRegistrationForm">
                <div class="form-row">
                    <div class="form-group">
                        <label for="sensor_eui">EUI (16 Hex-Zeichen) *</label>
                        <input type="text" id="sensor_eui" name="sensor_eui" maxlength="23" placeholder="z.B. fca84a090000000a oder FC:A8:4A:09:00:00:00:0A" required>
                        <small>16 Hexadezimale Zeichen (0-9, A-F), mit oder ohne Trennzeichen</small>
                    </div>
                    <div class="form-group">
                        <label for="short_addr">Short Address (4 Hex-Zeichen) *</label>
                        <input type="text" id="short_addr" name="short_addr" maxlength="5" placeholder="z.B. 0001 oder 00:01" required>
                        <small>4 Hexadezimale Zeichen, mit oder ohne Trennzeichen</small>
                    </div>
                </div>

                <div class="form-group">
                    <label for="network_key">Network Key (32 Hex-Zeichen) *</label>
                    <input type="text" id="network_key" name="network_key" maxlength="47" placeholder="z.B. 000102030405060708090a0b0c0d0e0f oder 00:01:02:03:04:05:06:07:08:09:0A:0B:0C:0D:0E:0F" required>
                    <small>32 Hexadezimale Zeichen für die Netzwerkverschlüsselung, mit oder ohne Trennzeichen</small>
                </div>

                <div class="form-group">
                    <label for="bidirectional">Bidirektionale Kommunikation</label>
                    <select id="bidirectional" name="bidirectional">
                        <option value="false">Nein - Nur Uplink</option>
                        <option value="true">Ja - Uplink & Downlink</option>
                    </select>
                    <small>Ermöglicht das Senden von Befehlen an den Sensor</small>
                </div>

                <h3 style="margin: 25px 0 15px 0; color: #ff6b35;">Home Assistant Metadaten</h3>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="manufacturer">Hersteller</label>
                        <input type="text" id="manufacturer" name="manufacturer" placeholder="z.B. Sentinum">
                        <small>Gerätehersteller für Home Assistant</small>
                    </div>
                    <div class="form-group">
                        <label for="model">Gerätetyp</label>
                        <input type="text" id="model" name="model" placeholder="z.B. Juno-TH">
                        <small>Modellbezeichnung des Sensors</small>
                    </div>
                </div>

                <div class="form-group">
                    <label for="device_name">Gerätename (optional)</label>
                    <input type="text" id="device_name" name="device_name" placeholder="z.B. Temperatur Büro 1">
                    <small>Anzeigename in Home Assistant</small>
                </div>

                <button type="submit" class="submit-btn">🚀 Sensor registrieren</button>
            </form>
        </div>
    </div>

    <script>
        // Set base URL for API calls
        const BASE_URL = '{{ ingress_path }}' || '';
        
        console.log('Ingress path from server:', '{{ ingress_path }}');
        console.log('BASE_URL resolved:', BASE_URL || window.location.origin);
        console.log('Current pathname:', window.location.pathname);
        console.log('Is embedded (iframe):', window.parent !== window);
        
        // Cache-Busting für alle API Calls
        function getCacheBusterURL(path) {
            const timestamp = Date.now();
            const random = Math.random();
            return `${BASE_URL}${path}?cb=${timestamp}&t=${random}`;
        }

        // Daten laden
        async function loadSensors() {
            try {
                const response = await fetch(getCacheBusterURL('/api/sensors'));
                const sensors = await response.json();
                
                document.getElementById('sensor-count').textContent = sensors.length;
                
                const sensorsList = document.getElementById('sensors-list');
                sensorsList.innerHTML = sensors.map(sensor => `
                    <div style="background: #f8f9fa; padding: 15px; margin: 10px 0; border-radius: 8px; border-left: 4px solid #ff6b35;">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <strong>EUI:</strong> ${sensor.eui}<br>
                                <strong>Typ:</strong> ${sensor.sensor_type}
                            </div>
                            <button onclick="toggleMetadata('sensor-${sensor.eui}')" style="border: none; background: #28a745; color: white; padding: 5px 10px; border-radius: 3px; cursor: pointer;">📋 Metadaten</button>
                        </div>
                        
                        <div style="margin-top: 10px;">
                            <strong>Letztes Update:</strong> ${sensor.last_update}<br>
                            <strong>SNR:</strong> ${sensor.snr || 'N/A'}<br>
                            <strong>RSSI:</strong> ${sensor.rssi || 'N/A'}<br>
                            <strong>Signalqualität:</strong> ${sensor.signal_quality || 'Unknown'}
                        </div>
                        
                        <!-- Ausklappbare Metadaten -->
                        <div id="sensor-${sensor.eui}" style="display: none; margin-top: 15px; padding: 15px; background: #e9ecef; border-radius: 5px; border-left: 3px solid #6c757d;">
                            <h5 style="margin: 0 0 10px 0; color: #495057;">🔧 Sensor-Metadaten</h5>
                            <div style="display: grid; grid-template-columns: auto 1fr auto; gap: 8px; align-items: center;">
                                <label><strong>Hersteller:</strong></label>
                                <input type="text" id="manufacturer-${sensor.eui}" value="${sensor.metadata?.manufacturer || 'Unknown'}" style="padding: 4px; border: 1px solid #ddd; border-radius: 3px;">
                                <button onclick="saveMetadata('sensor', '${sensor.eui}')" style="border: none; background: #007bff; color: white; padding: 4px 8px; border-radius: 3px; font-size: 11px;">💾</button>
                                
                                <label><strong>Modell:</strong></label>
                                <input type="text" id="model-${sensor.eui}" value="${sensor.metadata?.model || 'Unknown'}" style="padding: 4px; border: 1px solid #ddd; border-radius: 3px;">
                                <span></span>
                                
                                <label><strong>Gerätename:</strong></label>
                                <input type="text" id="name-${sensor.eui}" value="${sensor.metadata?.name || 'Sensor ' + sensor.eui}" style="padding: 4px; border: 1px solid #ddd; border-radius: 3px;">
                                <span></span>
                                
                                <label><strong>SW-Version:</strong></label>
                                <input type="text" id="sw_version-${sensor.eui}" value="${sensor.metadata?.sw_version || '1.0'}" style="padding: 4px; border: 1px solid #ddd; border-radius: 3px;">
                                <span></span>
                            </div>
                            <div style="margin-top: 10px; text-align: right;">
                                <button onclick="resetMetadata('sensor', '${sensor.eui}')" style="border: none; background: #6c757d; color: white; padding: 5px 10px; border-radius: 3px; font-size: 12px;">🔄 Zurücksetzen</button>
                            </div>
                        </div>
                        
                        ${sensor.needs_metadata ? `
                            <div style="margin-top: 10px; padding: 10px; background: #fff3cd; border-radius: 4px; border-left: 3px solid #ffc107;">
                                <small><strong>⚠️ Auto-Discovery unvollständig:</strong><br>
                                Manufacturer/Model fehlen. <a href="/decoders" style="color: #0066cc;">Decoder hinzufügen</a> oder 
                                <button onclick="addManualSensorData('${sensor.eui}')" style="border: none; background: #007bff; color: white; padding: 2px 6px; border-radius: 3px; font-size: 11px; cursor: pointer;">Schnell ergänzen</button>
                                </small>
                            </div>
                        ` : ''}
                    </div>
                `).join('');
            } catch (error) {
                console.error('Fehler beim Laden der Sensoren:', error);
            }
        }
        
        function addManualSensorData(eui) {
            // Für bestehende Sensoren
            if (eui) {
                const manufacturer = prompt('Hersteller eingeben (z.B. Sentinum, Loriot, etc.):');
                const model = prompt('Gerätemodell eingeben (z.B. Temperature Sensor v2.1):');
                
                if (manufacturer && model) {
                    fetch(`${BASE_URL}/api/sensors/${eui}/metadata`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ manufacturer, model })
                    }).then(response => {
                        if (response.ok) {
                            alert('✅ Metadaten gespeichert! Auto-Discovery wird beim nächsten Sensor-Update versucht.');
                            loadSensors(); // Refresh
                        } else {
                            alert('❌ Fehler beim Speichern der Metadaten');
                        }
                    });
                }
            } else {
                // Demo-Sensor erstellen
                const sensorEui = prompt('Sensor EUI eingeben (z.B. 1234567890ABCDEF):');
                if (!sensorEui) return;
                
                const manufacturer = prompt('Hersteller eingeben (z.B. Sentinum, Loriot, etc.):');
                const model = prompt('Gerätemodell eingeben (z.B. Temperature Sensor v2.1):');
                
                if (manufacturer && model) {
                    // Demo-Sensor simulieren
                    fetch(`${BASE_URL}/api/sensors/${sensorEui}/metadata`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ manufacturer, model })
                    }).then(response => {
                        if (response.ok) {
                            alert('✅ Demo-Sensor erstellt! Metadaten gespeichert.');
                            // Demo-Sensor-Daten simulieren
                            simulateDemoSensor(sensorEui);
                        } else {
                            alert('❌ Fehler beim Erstellen des Demo-Sensors');
                        }
                    });
                }
            }
        }
        
        function simulateDemoSensor(eui) {
            // Erstelle einen Demo-Sensor in der UI
            const now = new Date().toLocaleString();
            const demoSensor = {
                eui: eui,
                sensor_type: 'Demo Sensor',
                last_update: now,
                needs_metadata: false // Da wir gerade Metadaten gesetzt haben
            };
            
            // Füge den Demo-Sensor zur Anzeige hinzu
            const sensorsList = document.getElementById('sensors-list');
            const sensorHtml = `
                <div style="background: #f8f9fa; padding: 15px; margin: 10px 0; border-radius: 8px; border-left: 4px solid #28a745;">
                    <strong>EUI:</strong> ${demoSensor.eui}<br>
                    <strong>Typ:</strong> ${demoSensor.sensor_type}<br>
                    <strong>Letztes Update:</strong> ${demoSensor.last_update}<br>
                    <div style="margin-top: 10px; padding: 8px; background: #d4edda; border-radius: 4px; border-left: 3px solid #28a745;">
                        <small><strong>✅ Demo-Sensor:</strong> Metadaten erfolgreich gesetzt</small>
                    </div>
                </div>
            `;
            sensorsList.insertAdjacentHTML('afterbegin', sensorHtml);
            
            // Sensor-Count aktualisieren
            const currentCount = parseInt(document.getElementById('sensor-count').textContent);
            document.getElementById('sensor-count').textContent = currentCount + 1;
        }
        
        function addManualBasestationData(eui) {
            const manufacturer = prompt('Base Station Hersteller eingeben (z.B. Swissphone, Kerlink, etc.):');
            const model = prompt('Base Station Modell eingeben (z.B. MBS20, Wirnet Station):');
            
            if (manufacturer && model) {
                fetch(`${BASE_URL}/api/basestations/${eui}/metadata`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ manufacturer, model })
                }).then(response => {
                    if (response.ok) {
                        alert('✅ Base Station Metadaten gespeichert! Auto-Discovery wird beim nächsten Update versucht.');
                        loadBaseStations(); // Refresh
                    } else {
                        alert('❌ Fehler beim Speichern der Base Station Metadaten');
                    }
                });
            }
        }
        
        // Metadaten-UI Funktionen
        function toggleMetadata(elementId) {
            const element = document.getElementById(elementId);
            if (element.style.display === 'none') {
                element.style.display = 'block';
            } else {
                element.style.display = 'none';
            }
        }
        
        function saveMetadata(deviceType, eui) {
            const manufacturer = document.getElementById(`manufacturer-${eui}`).value.trim();
            const model = document.getElementById(`model-${eui}`).value.trim();
            const name = document.getElementById(`name-${eui}`).value.trim();
            const sw_version = document.getElementById(`sw_version-${eui}`).value.trim();
            
            if (!manufacturer || !model) {
                alert('❌ Hersteller und Modell sind erforderlich!');
                return;
            }
            
            const endpoint = deviceType === 'sensor' ? 
                `/api/sensors/${eui}/metadata` : 
                `/api/basestations/${eui}/metadata`;
            
            const data = {
                manufacturer: manufacturer,
                model: model,
                name: name,
                sw_version: sw_version
            };
            
            fetch(`${BASE_URL}${endpoint}`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(data)
            }).then(response => {
                if (response.ok) {
                    alert('✅ Metadaten erfolgreich gespeichert!');
                    // Lade Daten neu
                    if (deviceType === 'sensor') {
                        loadSensors();
                    } else {
                        loadBaseStations();
                    }
                } else {
                    alert('❌ Fehler beim Speichern der Metadaten');
                }
            }).catch(error => {
                console.error('Fehler beim Speichern:', error);
                alert('❌ Fehler beim Speichern der Metadaten');
            });
        }
        
        function resetMetadata(deviceType, eui) {
            if (confirm('Möchten Sie die Metadaten wirklich zurücksetzen?')) {
                document.getElementById(`manufacturer-${eui}`).value = 'Unknown';
                document.getElementById(`model-${eui}`).value = 'Unknown';
                document.getElementById(`name-${eui}`).value = deviceType === 'sensor' ? `Sensor ${eui}` : `Base Station ${eui}`;
                document.getElementById(`sw_version-${eui}`).value = '1.0';
                
                alert('🔄 Metadaten zurückgesetzt. Klicken Sie auf "💾" zum Speichern.');
            }
        }
        
        async function loadBaseStations() {
            try {
                const response = await fetch(getCacheBusterURL('/api/basestations'));
                const basestations = await response.json();
                
                document.getElementById('basestation-count').textContent = basestations.length;
                
                const basestationsList = document.getElementById('basestations-list');
                basestationsList.innerHTML = basestations.map(bs => `
                    <div style="background: #f8f9fa; padding: 15px; margin: 10px 0; border-radius: 8px; border-left: 4px solid #28a745;">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <strong>EUI:</strong> ${bs.eui}<br>
                                <strong>Status:</strong> ${bs.status}
                            </div>
                            <button onclick="toggleMetadata('basestation-${bs.eui}')" style="border: none; background: #17a2b8; color: white; padding: 5px 10px; border-radius: 3px; cursor: pointer;">📋 Metadaten</button>
                        </div>
                        
                        <div style="margin-top: 10px;">
                            <strong>Letztes Update:</strong> ${bs.last_update}<br>
                            <strong>CPU Usage:</strong> ${bs.cpu_usage || 'N/A'}<br>
                            <strong>Memory Usage:</strong> ${bs.memory_usage || 'N/A'}
                        </div>
                        
                        <!-- Ausklappbare Metadaten -->
                        <div id="basestation-${bs.eui}" style="display: none; margin-top: 15px; padding: 15px; background: #e9ecef; border-radius: 5px; border-left: 3px solid #6c757d;">
                            <h5 style="margin: 0 0 10px 0; color: #495057;">🏢 Base Station-Metadaten</h5>
                            <div style="display: grid; grid-template-columns: auto 1fr auto; gap: 8px; align-items: center;">
                                <label><strong>Hersteller:</strong></label>
                                <input type="text" id="manufacturer-${bs.eui}" value="${bs.metadata?.manufacturer || 'Unknown'}" style="padding: 4px; border: 1px solid #ddd; border-radius: 3px;">
                                <button onclick="saveMetadata('basestation', '${bs.eui}')" style="border: none; background: #007bff; color: white; padding: 4px 8px; border-radius: 3px; font-size: 11px;">💾</button>
                                
                                <label><strong>Modell:</strong></label>
                                <input type="text" id="model-${bs.eui}" value="${bs.metadata?.model || 'Unknown'}" style="padding: 4px; border: 1px solid #ddd; border-radius: 3px;">
                                <span></span>
                                
                                <label><strong>Gerätename:</strong></label>
                                <input type="text" id="name-${bs.eui}" value="${bs.metadata?.name || 'Base Station ' + bs.eui}" style="padding: 4px; border: 1px solid #ddd; border-radius: 3px;">
                                <span></span>
                                
                                <label><strong>SW-Version:</strong></label>
                                <input type="text" id="sw_version-${bs.eui}" value="${bs.metadata?.sw_version || '1.0'}" style="padding: 4px; border: 1px solid #ddd; border-radius: 3px;">
                                <span></span>
                            </div>
                            <div style="margin-top: 10px; text-align: right;">
                                <button onclick="resetMetadata('basestation', '${bs.eui}')" style="border: none; background: #6c757d; color: white; padding: 5px 10px; border-radius: 3px; font-size: 12px;">🔄 Zurücksetzen</button>
                            </div>
                        </div>
                        
                        ${bs.needs_metadata ? `
                            <div style="margin-top: 10px; padding: 10px; background: #fff3cd; border-radius: 4px; border-left: 3px solid #ffc107;">
                                <small><strong>⚠️ Auto-Discovery unvollständig:</strong><br>
                                Manufacturer/Model fehlen für Base Station. 
                                <button onclick="addManualBasestationData('${bs.eui}')" style="border: none; background: #007bff; color: white; padding: 2px 6px; border-radius: 3px; font-size: 11px; cursor: pointer;">Schnell ergänzen</button>
                                </small>
                            </div>
                        ` : ''}
                    </div>
                `).join('');
            } catch (error) {
                console.error('Fehler beim Laden der Base Stations:', error);
            }
        }
        
        // HOME ASSISTANT INGRESS CACHE-BUSTING LÖSUNG
        function addCacheBuster(url) {
            const separator = url.includes('?') ? '&' : '?';
            return url + separator + 'cb=' + Date.now() + '&t=' + Math.random();
        }
        
        // Erkenne Home Assistant Ingress Environment
        const isHomeAssistantIngress = window.location.pathname.includes('/api/hassio_ingress/') || 
                                      document.referrer.includes('homeassistant') || 
                                      window.parent !== window;
        
        // Global Navigation Function für alle Umgebungen
        window.navigateTo = function(path) {
            console.log('🔗 Navigation zu:', path);
            const url = `${BASE_URL}${path}?t=${Date.now()}&cb=${Math.random()}`;
            console.log('🚀 Navigation URL:', url);
            window.location.href = url;
        };
        
        if (isHomeAssistantIngress) {
            console.log('🏠 HOME ASSISTANT INGRESS ERKANNT - Aggressive Cache-Busting aktiviert!');
            
            // Überschreibe fetch mit automatischem Cache-Busting
            const originalFetch = window.fetch;
            window.fetch = function(url, options = {}) {
                if (typeof url === 'string' && (url.startsWith('/api/') || url.startsWith('${BASE_URL}/api/'))) {
                    url = addCacheBuster(url);
                    console.log('🚀 HA Cache-Buster URL:', url);
                }
                // Aggressive no-cache headers für Home Assistant
                options.cache = 'no-store';
                options.headers = {
                    ...options.headers,
                    'Cache-Control': 'no-cache, no-store, must-revalidate',
                    'Pragma': 'no-cache',
                    'Expires': '0',
                    'X-Requested-With': 'XMLHttpRequest'
                };
                return originalFetch(url, options);
            };
        }
        
        // Status und Dashboard-Infos laden
        async function loadStatus() {
            try {
                const response = await fetch(getCacheBusterURL('/api/status'));
                const status = await response.json();
                
                // Decoder Count setzen
                document.getElementById('decoder-count').textContent = status.decoder_count || 0;
                
                // MQTT Status setzen
                const mqttStatusElement = document.getElementById('mqtt-status');
                if (status.mqtt_connected && status.ha_mqtt_connected) {
                    mqttStatusElement.textContent = '✅';
                    mqttStatusElement.style.color = '#28a745';
                } else {
                    mqttStatusElement.textContent = '⚠️';
                    mqttStatusElement.style.color = '#ffc107';
                }
            } catch (error) {
                console.error('Fehler beim Laden des Status:', error);
                document.getElementById('decoder-count').textContent = '?';
                document.getElementById('mqtt-status').textContent = '❌';
            }
        }

        // Auto-refresh mit verbessertem Error-Handling
        function startAutoRefresh() {
            loadSensors();
            loadBaseStations();
            loadStatus();
            
            setInterval(() => {
                loadSensors();
                loadBaseStations();
                loadStatus();
            }, 30000);
        }
        
        // SENSOR REGISTRATION MODAL FUNCTIONS
        function showSensorRegistrationModal() {
            document.getElementById('sensorRegistrationModal').style.display = 'block';
        }

        function closeSensorRegistrationModal() {
            document.getElementById('sensorRegistrationModal').style.display = 'none';
            document.getElementById('sensorRegistrationForm').reset();
            clearValidationErrors();
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('sensorRegistrationModal');
            if (event.target === modal) {
                closeSensorRegistrationModal();
            }
        }

        // HEX VALIDATION FUNCTIONS
        function isValidHex(value, length) {
            const hexPattern = new RegExp(`^[0-9A-Fa-f]{${length}}$`);
            return hexPattern.test(value);
        }

        function validateForm() {
            clearValidationErrors();
            let isValid = true;

            const eui = document.getElementById('sensor_eui').value.trim();
            const networkKey = document.getElementById('network_key').value.trim();
            const shortAddr = document.getElementById('short_addr').value.trim();

            // EUI Validation (16 hex characters)
            if (!eui) {
                showFieldError('sensor_eui', 'EUI ist erforderlich');
                isValid = false;
            } else if (!isValidHex(eui, 16)) {
                showFieldError('sensor_eui', 'EUI muss genau 16 Hexadezimal-Zeichen enthalten');
                isValid = false;
            }

            // Network Key Validation (32 hex characters)
            if (!networkKey) {
                showFieldError('network_key', 'Network Key ist erforderlich');
                isValid = false;
            } else if (!isValidHex(networkKey, 32)) {
                showFieldError('network_key', 'Network Key muss genau 32 Hexadezimal-Zeichen enthalten');
                isValid = false;
            }

            // Short Address Validation (4 hex characters)
            if (!shortAddr) {
                showFieldError('short_addr', 'Short Address ist erforderlich');
                isValid = false;
            } else if (!isValidHex(shortAddr, 4)) {
                showFieldError('short_addr', 'Short Address muss genau 4 Hexadezimal-Zeichen enthalten');
                isValid = false;
            }

            return isValid;
        }

        function showFieldError(fieldId, message) {
            const field = document.getElementById(fieldId);
            field.classList.add('error');
            
            // Remove existing error message
            const existingError = field.parentNode.querySelector('.error-message');
            if (existingError) {
                existingError.remove();
            }
            
            // Add new error message
            const errorDiv = document.createElement('div');
            errorDiv.className = 'error-message';
            errorDiv.textContent = message;
            field.parentNode.appendChild(errorDiv);
        }

        function clearValidationErrors() {
            document.querySelectorAll('.error').forEach(field => {
                field.classList.remove('error');
            });
            document.querySelectorAll('.error-message').forEach(msg => {
                msg.remove();
            });
        }

        // FORM SUBMISSION
        document.getElementById('sensorRegistrationForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            if (!validateForm()) {
                return;
            }

            const submitBtn = document.querySelector('.submit-btn');
            const originalText = submitBtn.textContent;
            
            try {
                submitBtn.disabled = true;
                submitBtn.textContent = '⏳ Wird registriert...';

                const formData = new FormData(this);
                const data = Object.fromEntries(formData.entries());
                
                // Convert bidirectional to boolean
                data.bidirectional = data.bidirectional === 'true';

                console.log('🚀 Registriere Sensor:', data);

                const response = await fetch(getCacheBusterURL('/api/sensor/add'), {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(data)
                });

                const result = await response.json();

                if (response.ok) {
                    alert('✅ Sensor erfolgreich registriert!');
                    closeSensorRegistrationModal();
                    // Refresh sensor list
                    loadSensors();
                } else {
                    alert('❌ Fehler bei der Registrierung: ' + (result.error || 'Unbekannter Fehler'));
                }
            } catch (error) {
                console.error('Registration error:', error);
                alert('❌ Netzwerkfehler bei der Registrierung');
            } finally {
                submitBtn.disabled = false;
                submitBtn.textContent = originalText;
            }
        });

        // AUTO-FORMATTING FOR HEX FIELDS
        document.getElementById('sensor_eui').addEventListener('input', function(e) {
            e.target.value = e.target.value.toUpperCase().replace(/[^0-9A-F]/g, '');
        });

        document.getElementById('network_key').addEventListener('input', function(e) {
            e.target.value = e.target.value.toLowerCase().replace(/[^0-9a-f]/g, '');
        });

        document.getElementById('short_addr').addEventListener('input', function(e) {
            e.target.value = e.target.value.toUpperCase().replace(/[^0-9A-F]/g, '');
        });

        document.addEventListener('DOMContentLoaded', startAutoRefresh);
    </script>
</body>
</html>